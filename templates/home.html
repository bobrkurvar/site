{% extends "base.html" %}

{% block title %}Главная - Мой сайт{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/home.css">
<link rel="stylesheet" href="/static/slider.css">
{% endblock %}

{% block content %}

<!-- СЛАЙДЕР + Чек-лист + Производители -->
<section class="slider-section">
    <div class="slider-container">

        <!-- Левая колонка: только преимущества -->
        <div class="slider-sidebar">
            <div class="features-checklist">
                <h3>Наши преимущества</h3>
                <ul>
                    <li>✅ Широкий ассортимент цветов и размеров</li>
                    <li>✅ Высокое качество материалов</li>
                    <li>✅ Быстрая доставка</li>
                    <li>✅ Профессиональные консультации</li>
                </ul>
            </div>
        </div>

        <!-- Правая колонка: слайдер + производители -->
        <div class="slider-column">
            <div class="slider">
                <div class="slides">

                    <div class="slide active">
                        <img src="/static/images/slides/slide1.png" alt="Слайд 1">
                    </div>

                    <div class="slide">
                        <img src="/static/images/slides/slide2.png" alt="Слайд 2">
                    </div>

                    <div class="slide">
                        <img src="/static/images/slides/slide3.png" alt="Слайд 3">
                    </div>

                </div>

                <div class="dots">
                    <span class="dot active" data-index="0"></span>
                    <span class="dot" data-index="1"></span>
                    <span class="dot" data-index="2"></span>
                </div>
            </div>

            <!-- Список производителей под слайдером -->
            <div class="producers-list">
                <h3>Производители</h3>
                <ul>
                    {% for producer in producers %}
                        <li>{{ producer.name }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>

    </div>
</section>


{% endblock %}


{% block extra_js %}
<script>
document.addEventListener("DOMContentLoaded", function () {
    const slides = document.querySelectorAll(".slide");
    const dots = document.querySelectorAll(".dot");
    const slider = document.querySelector(".slides");

    let current = 0;
    let interval = null;

    function showSlide(index) {
        slides.forEach(s => s.classList.remove("active"));
        dots.forEach(d => d.classList.remove("active"));
        slides[index].classList.add("active");
        dots[index].classList.add("active");
    }

    function nextSlide() {
        current = (current + 1) % slides.length;
        showSlide(current);
    }

    function prevSlide() {
        current = (current - 1 + slides.length) % slides.length;
        showSlide(current);
    }

    function startAutoSlide() {
        interval = setInterval(nextSlide, 4000);
    }

    function stopAutoSlide() {
        clearInterval(interval);
    }

    // Переключение по клику на левую/правую часть слайда
    slider.addEventListener("click", (e) => {
        const rect = slider.getBoundingClientRect();
        const x = e.clientX - rect.left; // координата клика внутри слайда

        stopAutoSlide();
        if (x < rect.width / 2) {
            prevSlide(); // клик слева → предыдущий слайд
        } else {
            nextSlide(); // клик справа → следующий слайд
        }
        startAutoSlide();
    });

    // Точки
    dots.forEach(dot => {
        dot.addEventListener("click", () => {
            stopAutoSlide();
            current = parseInt(dot.dataset.index);
            showSlide(current);
            startAutoSlide();
        });
    });

    // Запуск
    showSlide(current);
    startAutoSlide();
});
</script>
{% endblock %}

