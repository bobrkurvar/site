<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ö–∞—Ç–∞–ª–æ–≥ –ø–ª–∏—Ç–∫–∏</title>
    <link rel="stylesheet" href="/static/base.css">
    <link rel="stylesheet" href="/static/catalog.css">
</head>
<body>

<header class="main-header">
    <div class="header-content">
        <h1 class="logo">–ö–∞—Ç–∞–ª–æ–≥ –ø–ª–∏—Ç–∫–∏</h1>
        <nav class="main-nav">
            <a href="/" class="nav-link">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="/catalog" class="nav-link active">–ö–∞—Ç–∞–ª–æ–≥</a>
        </nav>
    </div>
</header>

<main class="catalog-panel">
    <div class="catalog-header">
        <h2>–ù–∞—à–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è –ø–ª–∏—Ç–∫–∏</h2>
        <p>–í—Å–µ–≥–æ —Ç–æ–≤–∞—Ä–æ–≤: {{ tiles|length }} —à—Ç.</p>
    </div>

    <div class="catalog-layout">
        <!-- –ü–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–±–æ–∫—É -->
        <aside class="filters-sidebar">
            <div class="filters-panel">
                <h3>–§–∏–ª—å—Ç—Ä—ã</h3>
                <form class="filters-form" method="get" action="/catalog">
                    <div class="filter-group">
                        <label>–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é:</label>
                        <input type="text" name="name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ..."
                               value="{{ request.query_params.get('name', '') }}">
                    </div>

                    <div class="filter-group">
                        <label>–†–∞–∑–º–µ—Ä:</label>
                        <select name="size">
                            <option value="">–í—Å–µ —Ä–∞–∑–º–µ—Ä—ã</option>
                            {% for size in available_sizes %}
                            <option value="{{ size.width }},{{ size.height }}"
                                    {% if request.query_params.get('size') == size.width ~ ',' ~ size.height %}selected{% endif %}>
                                {{ size.width }}x{{ size.height }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div class="filter-group">
                        <label>–¶–≤–µ—Ç:</label>
                        <input type="text" name="color" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç..."
                               value="{{ request.query_params.get('color', '') }}">
                    </div>

                    <div class="filter-actions">
                        <button type="submit" class="filter-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
                        <a href="/catalog" class="clear-filters">–°–±—Ä–æ—Å–∏—Ç—å</a>
                    </div>
                </form>
            </div>
        </aside>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å —Ç–æ–≤–∞—Ä–∞–º–∏ -->
        <section class="products-section">
            <div class="tile-grid">
                {% for tile in tiles %}
                <div class="tile-card">
                    <div class="tile-image-container">
                        {% if tile.image_path %}
                        <img src="/static/images/{{ tile.name }}"
                             alt="{{ tile.name }}"
                             class="tile-image"
                             loading="lazy">
                        {% else %}
                        <div class="no-image">–ù–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>
                        {% endif %}
                    </div>
                    <div class="tile-content">
                        <h3 class="tile-title">{{ tile.name }}</h3>
                        <div class="size-badge">
                            <span class="size-icon">üìê</span>
                            {{ tile.width }}√ó{{ tile.height }}
                        </div>
                        {% if tile.color %}
                        <div class="color-badge">
                            <span class="color-icon">üé®</span>
                            {{ tile.color }}
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}

                {% if not tiles %}
                <div class="empty-catalog">
                    <p>–¢–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
                    <a href="/catalog" class="clear-filters">–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã</a>
                </div>
                {% endif %}
            </div>
        </section>
    </div>
</main>

</body>
</html>